plugin:
  name: fylr_example
  version: "2"
  l10n: l10n/example-loca.csv
  webfrontend:
    url: main.js
  displayname:
    de-DE: FYLR-Example
    en-US: FYLR-Example

base_url_prefix: "webfrontend"

extensions:
  dump/empty:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: "body"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "empty.js"

  dump/sleep:
    exec:
      service: "python3"
      commands:
        - prog: "python3"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "sleep.py"

  dump/info:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: "body"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "dump_info.js"
            - type: "value"
              value: "%info.json%"

  dump/error:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: "body"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "error_400.js"

  dump/file:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: "body"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "stdin_to_file.js"
            - type: "value"
              value: "/tmp/record.log"
            - type: "value"
              value: "%info.json%"

  webhook/set_comment:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: "body"
          stdout:
            type: "body"
          args:
            - type: "value"
              value: "set_comment.js"
            - type: "value"
              value: "%info.json%"

callbacks:
  export/demo:
    exec:
      timeoutSec: 60
      service: "node"
      commands:
        - prog: "node"
          stdout:
            type: body
          args:
            - type: "value"
              value: "--max-http-header-size=1000000"
            - type: "value"
              value: "export_demo.js"
            - type: "value"
              value: "%info.json%"

  transition_db_pre_save/set_comment:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: body
          stdout:
            type: body
          args:
            - type: "value"
              value: "set_comment.js"

  db_pre_save:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: body
          stdout:
            type: body
          args:
            - type: "value"
              value: "set_comment.js"

  DISABLED-session_authenticate:
    exec:
      service: "node"
      commands:
        - prog: "node"
          stdin:
            type: body
          stdout:
            type: body
          args:
            - type: "value"
              value: "cat.js"

base_config:
  - name: comment
    parameters:
      value:
        type: text
        position: 0

system_rights:
  - name: example_right
    comment: this right was added by the FYLR example plugin
    parameters:
      - name: bool
        type: bool
      - name: int
        type: int
      - name: text
        type: text
      - name: string-list
        type: string-list
        choices: [ a, b, c ]
      - name: string-list-one
        type: string-list-one
        choices: [ a, b, c ]
      - name: string-list-one-or-zero
        type: string-list-one-or-zero
        choices: [ a, b, c ]
      - name: mask-select
        type: mask-select
      - name: objecttype-select
        type: objecttype-select
      - name: eas-column-select
        type: eas-column-select
      - name: pool-select
        type: pool-select
      - name: preview-versions
        type: preview-versions


